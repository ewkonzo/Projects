<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_05) on Mon Mar 19 14:58:13 CST 2018 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>HSMDevice (cloudposSDK)</title>
<meta name="date" content="2018-03-19">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="HSMDevice (cloudposSDK)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HSMDevice.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/cloudpos/hsm/HSMDeviceSpec.html" title="interface in com.cloudpos.hsm"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/cloudpos/hsm/HSMDevice.html" target="_top">Frames</a></li>
<li><a href="HSMDevice.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.cloudpos.hsm</div>
<h2 title="Interface HSMDevice" class="title">Interface HSMDevice</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../com/cloudpos/Device.html" title="interface in com.cloudpos">Device</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">HSMDevice</span>
extends <a href="../../../com/cloudpos/Device.html" title="interface in com.cloudpos">Device</a></pre>
<div class="block">The <b>HSMDevice</b> interface defines the hardware safe module APIs to be used by the applications.
 Any implementation providing hardware safe module services must supply a concrete class implementing this interface. 
 <p>The hardware safe module object is obtained from the <code>POSTerminal</code>, its' as follows:
 <pre>
 HSMDevice hsmDevice =
         (HSMDevice) POSTerminal.getInstance().getDevice("cloudpos.device.hsm");
 </pre>
 Among them, the "cloudpos.device.hsm" string is to identify the hardware safe module, defined by 
 the specific implementation.
 <p>
 The HSM device is not exclusive device. It can be opened by several applications simultaneously.
 But some write operation must be exclusive.
 <p>
 <p>Uses the hardware safe module device object to control the operation of the hardware safe module.
 <p>An app can request permission to access the device, as shown below:
 <pre> &lt;uses-permission android:name="android.permission.CLOUDPOS_SAFE_MODULE" /&gt;
 </pre></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/cloudpos/Device.html" title="interface in com.cloudpos"><code>Device</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_FORMAT_DER">CERT_FORMAT_DER</a></strong></code>
<div class="block">DER format</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_FORMAT_PEM">CERT_FORMAT_PEM</a></strong></code>
<div class="block">PEM format</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_APP_ROOT">CERT_TYPE_APP_ROOT</a></strong></code>
<div class="block">Terminal application root certificate</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_COMM_ROOT">CERT_TYPE_COMM_ROOT</a></strong></code>
<div class="block">Terminal SSL communication root certificate</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_PUBLIC_KEY">CERT_TYPE_PUBLIC_KEY</a></strong></code>
<div class="block">Terminal public key certificate</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_TERMINAL_OWNER">CERT_TYPE_TERMINAL_OWNER</a></strong></code>
<div class="block">Terminal owner root certificate</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#decrypt(int, java.lang.String, byte[])">decrypt</a></strong>(int&nbsp;algorithm,
       java.lang.String&nbsp;aliasPrivateKey,
       byte[]&nbsp;bufCipher)</code>
<div class="block">Do decryption by the given private key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#deleteCertificate(int, java.lang.String)">deleteCertificate</a></strong>(int&nbsp;certType,
                 java.lang.String&nbsp;alias)</code>
<div class="block">Removes the certificate of the given alias.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#deleteKeyPair(java.lang.String)">deleteKeyPair</a></strong>(java.lang.String&nbsp;aliasPrivateKey)</code>
<div class="block">Removes the key pair of the given alias.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#encrypt(int, java.lang.String, byte[])">encrypt</a></strong>(int&nbsp;algorithm,
       java.lang.String&nbsp;aliasPrivateKey,
       byte[]&nbsp;bufPlain)</code>
<div class="block">Do encryption by the given private key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#generateCSR(java.lang.String, javax.security.auth.x500.X500Principal)">generateCSR</a></strong>(java.lang.String&nbsp;aliasPrivateKey,
           javax.security.auth.x500.X500Principal&nbsp;subject)</code>
<div class="block">Generates the CSR for given private key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#generateKeyPair(java.lang.String, int, int)">generateKeyPair</a></strong>(java.lang.String&nbsp;aliasPrivateKey,
               int&nbsp;algorithm,
               int&nbsp;keySize)</code>
<div class="block">Requests hardware safe module to generate a key pair inside the module.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#generateRandom(int)">generateRandom</a></strong>(int&nbsp;length)</code>
<div class="block">Gets the real random buffer from hardware safe module.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#getCertificate(int, java.lang.String, int)">getCertificate</a></strong>(int&nbsp;certType,
              java.lang.String&nbsp;alias,
              int&nbsp;dataFormat)</code>
<div class="block">Gets the certificate data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#getEncryptedUniqueCode(java.lang.String, java.lang.String)">getEncryptedUniqueCode</a></strong>(java.lang.String&nbsp;uniqueCode,
                      java.lang.String&nbsp;randomFactor)</code>
<div class="block">Gets the encrypted cipher data of unique code.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#getFreeSpace()">getFreeSpace</a></strong>()</code>
<div class="block">Gets the free space of the hardware safe module.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#injectPublicKeyCertificate(java.lang.String, java.lang.String, byte[], int)">injectPublicKeyCertificate</a></strong>(java.lang.String&nbsp;alias,
                          java.lang.String&nbsp;aliasPrivateKey,
                          byte[]&nbsp;bufCert,
                          int&nbsp;dataFormat)</code>
<div class="block">Injects the certificate of the public key of the existing key pair.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#injectRootCertificate(int, java.lang.String, byte[], int)">injectRootCertificate</a></strong>(int&nbsp;certType,
                     java.lang.String&nbsp;alias,
                     byte[]&nbsp;bufCert,
                     int&nbsp;dataFormat)</code>
<div class="block">Injects the root certificates to hardware safe module.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#isTampered()">isTampered</a></strong>()</code>
<div class="block">Checks the hardware safe module is tampered or not.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#open(int)">open</a></strong>(int&nbsp;logicalID)</code>
<div class="block">Opens the hardware safe module for use.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/cloudpos/hsm/HSMDevice.html#queryCertificates(int)">queryCertificates</a></strong>(int&nbsp;certType)</code>
<div class="block">Gets the certificates from the hardware safe module.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.cloudpos.Device">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.cloudpos.<a href="../../../com/cloudpos/Device.html" title="interface in com.cloudpos">Device</a></h3>
<code><a href="../../../com/cloudpos/Device.html#cancelRequest()">cancelRequest</a>, <a href="../../../com/cloudpos/Device.html#close()">close</a>, <a href="../../../com/cloudpos/Device.html#getFailCount()">getFailCount</a>, <a href="../../../com/cloudpos/Device.html#getUsageCount()">getUsageCount</a>, <a href="../../../com/cloudpos/Device.html#open()">open</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CERT_FORMAT_PEM">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CERT_FORMAT_PEM</h4>
<pre>static final&nbsp;int CERT_FORMAT_PEM</pre>
<div class="block">PEM format</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.cloudpos.hsm.HSMDevice.CERT_FORMAT_PEM">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CERT_FORMAT_DER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CERT_FORMAT_DER</h4>
<pre>static final&nbsp;int CERT_FORMAT_DER</pre>
<div class="block">DER format</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.cloudpos.hsm.HSMDevice.CERT_FORMAT_DER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CERT_TYPE_TERMINAL_OWNER">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CERT_TYPE_TERMINAL_OWNER</h4>
<pre>static final&nbsp;int CERT_TYPE_TERMINAL_OWNER</pre>
<div class="block">Terminal owner root certificate</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.cloudpos.hsm.HSMDevice.CERT_TYPE_TERMINAL_OWNER">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CERT_TYPE_PUBLIC_KEY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CERT_TYPE_PUBLIC_KEY</h4>
<pre>static final&nbsp;int CERT_TYPE_PUBLIC_KEY</pre>
<div class="block">Terminal public key certificate</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.cloudpos.hsm.HSMDevice.CERT_TYPE_PUBLIC_KEY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CERT_TYPE_APP_ROOT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>CERT_TYPE_APP_ROOT</h4>
<pre>static final&nbsp;int CERT_TYPE_APP_ROOT</pre>
<div class="block">Terminal application root certificate</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.cloudpos.hsm.HSMDevice.CERT_TYPE_APP_ROOT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="CERT_TYPE_COMM_ROOT">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CERT_TYPE_COMM_ROOT</h4>
<pre>static final&nbsp;int CERT_TYPE_COMM_ROOT</pre>
<div class="block">Terminal SSL communication root certificate</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.cloudpos.hsm.HSMDevice.CERT_TYPE_COMM_ROOT">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="open(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>void&nbsp;open(int&nbsp;logicalID)
          throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Opens the hardware safe module for use.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>logicalID</code> - The logical ID of the hardware safe module device to open.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="isTampered()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTampered</h4>
<pre>boolean&nbsp;isTampered()
                   throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Checks the hardware safe module is tampered or not. If the hardware safe module is tampered,
  all data in the hardware safe module should not be trusted.
 <p>
 The operation is not exclusive.
 Hardware safe module with automatic protection mechanism, in the event of the attack on hardware safe module, 
 automatically trigger self-destruction and remove all sensitive information</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> tempered. <code>false</code> not tempered.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="generateRandom(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateRandom</h4>
<pre>byte[]&nbsp;generateRandom(int&nbsp;length)
                      throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Gets the real random buffer from hardware safe module.
 <p>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>length</code> - The length of the buffer< 64.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Random buffer.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="generateKeyPair(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateKeyPair</h4>
<pre>void&nbsp;generateKeyPair(java.lang.String&nbsp;aliasPrivateKey,
                   int&nbsp;algorithm,
                   int&nbsp;keySize)
                     throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Requests hardware safe module to generate a key pair inside the module.
 <br>
 The operation is exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aliasPrivateKey</code> - The alias of the private key.</dd><dd><code>algorithm</code> - The algorithm of the key pair. Currently, only "RSA" is supported.</dd><dd><code>keySize</code> - The bit size of the key. Currently, only 2048 is supported.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="injectPublicKeyCertificate(java.lang.String, java.lang.String, byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>injectPublicKeyCertificate</h4>
<pre>boolean&nbsp;injectPublicKeyCertificate(java.lang.String&nbsp;alias,
                                 java.lang.String&nbsp;aliasPrivateKey,
                                 byte[]&nbsp;bufCert,
                                 int&nbsp;dataFormat)
                                   throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Injects the certificate of the public key of the existing key pair.
 <p> 
 The operation is exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>alias</code> - The alias of the certificate.</dd><dd><code>aliasPrivateKey</code> - The alias of the key pair, usually it's the private key's alias.</dd><dd><code>bufCert</code> - The data of the certificate.</dd><dd><code>dataFormat</code> - The format of the buffer, Currently, only <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_FORMAT_PEM"><code>CERT_FORMAT_PEM</code></a> is supported.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> Success.<code>false</code> Fail</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="injectRootCertificate(int, java.lang.String, byte[], int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>injectRootCertificate</h4>
<pre>boolean&nbsp;injectRootCertificate(int&nbsp;certType,
                            java.lang.String&nbsp;alias,
                            byte[]&nbsp;bufCert,
                            int&nbsp;dataFormat)
                              throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Injects the root certificates to hardware safe module.
 <p>
 All the certificate must signed by the terminal's owner certificate.
 The keyUsage flag must be set as define:<p>
 <ul>
 <li><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_TERMINAL_OWNER"><code>CERT_TYPE_TERMINAL_OWNER</code></a> certificate's keyUsage flag must be set as critical, and the KeyEncipherment, CertificateSign and CRLSign must be set, other flags are cleared.
 <li><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_APP_ROOT"><code>CERT_TYPE_APP_ROOT</code></a> certificate's keyUsage flag must be set as critical, and the DigitalSignature, CertificateSign must be set, other flags are cleared.
 <li><a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_COMM_ROOT"><code>CERT_TYPE_COMM_ROOT</code></a> certificate's keyUsage flag must be set as non-critical and DigitalSignature, KeyEncipherment, DataEncipherment must be set, other flags are cleared.
 </ul>
 The operation is exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>certType</code> - The certificate type: <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_TERMINAL_OWNER"><code>CERT_TYPE_TERMINAL_OWNER</code></a>, <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_APP_ROOT"><code>CERT_TYPE_APP_ROOT</code></a> or <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_COMM_ROOT"><code>CERT_TYPE_COMM_ROOT</code></a>.</dd><dd><code>alias</code> - The alias of the certificate.</dd><dd><code>bufCert</code> - The data of the certificate.</dd><dd><code>dataFormat</code> - The format of the buffer, Currently, only <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_FORMAT_PEM"><code>CERT_FORMAT_PEM</code></a> is supported.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> Success. <code>false</code> Fail.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="getCertificate(int, java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCertificate</h4>
<pre>byte[]&nbsp;getCertificate(int&nbsp;certType,
                    java.lang.String&nbsp;alias,
                    int&nbsp;dataFormat)
                      throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Gets the certificate data.
 <p>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>certType</code> - The certificate type, could be  <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_TERMINAL_OWNER"><code>CERT_TYPE_TERMINAL_OWNER</code></a>, <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_APP_ROOT"><code>CERT_TYPE_APP_ROOT</code></a> or <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_COMM_ROOT"><code>CERT_TYPE_COMM_ROOT</code></a>.</dd><dd><code>alias</code> - The alias of the certificate.</dd><dd><code>dataFormat</code> - The format of the buffer, Currently, only <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_FORMAT_PEM"><code>CERT_FORMAT_PEM</code></a> is supported.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the buffer of the certificate</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="deleteCertificate(int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteCertificate</h4>
<pre>boolean&nbsp;deleteCertificate(int&nbsp;certType,
                        java.lang.String&nbsp;alias)
                          throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Removes the certificate of the given alias.
 <p>
 The OWNER certificate can't be removed.
 <br>
 The operation is exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>certType</code> - The certificate type, could be  <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_PUBLIC_KEY"><code>CERT_TYPE_PUBLIC_KEY</code></a>, <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_APP_ROOT"><code>CERT_TYPE_APP_ROOT</code></a> or <a href="../../../com/cloudpos/hsm/HSMDevice.html#CERT_TYPE_COMM_ROOT"><code>CERT_TYPE_COMM_ROOT</code></a>.</dd><dd><code>alias</code> - The alias of the certificate.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> Delete success. <code>false</code> Delete fail.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="queryCertificates(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryCertificates</h4>
<pre>java.lang.String[]&nbsp;queryCertificates(int&nbsp;certType)
                                     throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Gets the certificates from the hardware safe module.  
 <br>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>certType</code> - The certificate type.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The alias String array of the certificates in the hardware safe module.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="deleteKeyPair(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteKeyPair</h4>
<pre>boolean&nbsp;deleteKeyPair(java.lang.String&nbsp;aliasPrivateKey)
                      throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Removes the key pair of the given alias.
 <br>
 The operation is exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aliasPrivateKey</code> - The alias of the private key.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> Success. <code>false</code> Fail.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="generateCSR(java.lang.String, javax.security.auth.x500.X500Principal)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateCSR</h4>
<pre>byte[]&nbsp;generateCSR(java.lang.String&nbsp;aliasPrivateKey,
                 javax.security.auth.x500.X500Principal&nbsp;subject)
                   throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Generates the CSR for given private key.
 <br>
 The operation is exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>aliasPrivateKey</code> - The alias of the private key.</dd><dd><code>subject</code> - X500Principal.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The PEM buffer of the CSR.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="encrypt(int, java.lang.String, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encrypt</h4>
<pre>byte[]&nbsp;encrypt(int&nbsp;algorithm,
             java.lang.String&nbsp;aliasPrivateKey,
             byte[]&nbsp;bufPlain)
               throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Do encryption by the given private key. The result data is in PKCS#1 padding format.
 <br>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>algorithm</code> - the algorithm of encrypt.</dd><dd><code>aliasPrivateKey</code> - the alias of the given private key.</dd><dd><code>bufPlain</code> - the buffer of the plain data.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Encrypted data buffer.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="decrypt(int, java.lang.String, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decrypt</h4>
<pre>byte[]&nbsp;decrypt(int&nbsp;algorithm,
             java.lang.String&nbsp;aliasPrivateKey,
             byte[]&nbsp;bufCipher)
               throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Do decryption by the given private key. The result data is in PKCS#1 padding format.
 <br>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>algorithm</code> - The algorithm of decrypt.</dd><dd><code>aliasPrivateKey</code> - The alias of the given private key.</dd><dd><code>bufCipher</code> - The buffer of the cipher data.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Decrypted data buffer.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="getFreeSpace()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSpace</h4>
<pre>long&nbsp;getFreeSpace()
                  throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Gets the free space of the hardware safe module.
 <br>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The size of the free space.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code> - for the standard reasons that are documented in <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos"><code>DeviceException</code></a>.</dd></dl>
</li>
</ul>
<a name="getEncryptedUniqueCode(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getEncryptedUniqueCode</h4>
<pre>java.lang.String&nbsp;getEncryptedUniqueCode(java.lang.String&nbsp;uniqueCode,
                                      java.lang.String&nbsp;randomFactor)
                                        throws <a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></pre>
<div class="block">Gets the encrypted cipher data of unique code. only used in China.
 <br>
 The operation is not exclusive.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uniqueCode</code> - </dd><dd><code>randomFactor</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>encrypted unique code.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/cloudpos/DeviceException.html" title="class in com.cloudpos">DeviceException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HSMDevice.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/cloudpos/hsm/HSMDeviceSpec.html" title="interface in com.cloudpos.hsm"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/cloudpos/hsm/HSMDevice.html" target="_top">Frames</a></li>
<li><a href="HSMDevice.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
